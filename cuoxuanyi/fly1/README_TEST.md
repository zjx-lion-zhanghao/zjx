# 深度相机数据流测试系统

本测试系统用于验证从深度相机到控制节点的完整数据流程。系统包括以下组件：

1. **随机桶相机节点** (`random_bucket_camera.py`): 
   - 模拟深度相机，发布随机的桶位置和大小数据
   - 支持多种测试模式：完全随机、固定位置、固定数量等

2. **桶过滤节点** (`bucket_filter_node.py`): 
   - 接收桶数据，找出最小的桶
   - 将最小桶的位置发布给控制节点

3. **控制节点** (`control_v1.py`):
   - 接收目标位置，更新控制逻辑
   - 在实际环境中执行飞行控制

4. **数据流监控节点** (`data_flow_monitor.py`):
   - 监控整个数据流程
   - 验证数据是否正确传递，检测可能的问题

## 快速开始

运行测试启动脚本：

```bash
./random_bucket_test.sh
```

脚本提供了菜单式界面，可以选择多种测试选项。

## 测试模式

1. **基础节点操作**:
   - 运行单独的节点（相机、过滤、监控、控制）
   - 用于隔离测试各个组件

2. **综合测试**:
   - 同时运行多个节点，测试节点间的协同工作
   - 完整测试模拟整个数据流程

3. **数据观测**:
   - 查看活跃的ROS2话题
   - 监控各个话题的数据流

4. **配置选项**:
   - 调整相机节点的测试参数
   - 例如：固定桶数量、使用固定位置等

## 主要功能

- **随机桶生成**: 相机节点生成随机的桶位置和大小，包括一个明显最小的桶
- **数据流监控**: 自动验证数据是否正确地从相机流向控制节点
- **灵活配置**: 可调整测试参数，适应不同的测试场景
- **日志记录**: 记录详细的日志用于故障排查和验证

## 扩展性

该测试系统设计为可扩展的，可以通过以下方式进行扩展：

1. 添加新的测试模式
2. 调整随机范围参数
3. 添加更多监控指标和检验点
4. 整合到系统自动启动流程
